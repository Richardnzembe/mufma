<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}MUFMA - Multi-Utility Farming Management App{% endblock %}</title>

    <!-- Main CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <!-- PWA Manifest -->
    <link rel="manifest" href="{% static 'manifest.json' %}">

    <!-- Theme color -->
    <meta name="theme-color" content="#0b1c2d">

    <!-- iOS PWA support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="MUFMA">
    <link rel="apple-touch-icon" href="{% static 'icons/ios/180.png' %}">

    <!-- Windows tile -->
    <meta name="msapplication-TileColor" content="#0b1c2d">
    <meta name="msapplication-TileImage"
          content="{% static 'icons/windows11/Square150x150Logo.scale-100.png' %}">

    {% block extra_css %}{% endblock %}
        <!-- Register service worker for PWA/offline support -->
        <script>
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                    navigator.serviceWorker.register('/service-worker.js').then(function(reg) {
                        console.log('ServiceWorker registration successful with scope: ', reg.scope);
                    }, function(err) {
                        console.log('ServiceWorker registration failed: ', err);
                    });
                });
            }

            // Simple install prompt handling
            let deferredPrompt;
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                // Show your install UI here if desired
            });
        </script>
</head>
